{{/* <!--

	{{< shortcode-section
	  class="helper classes from shortcode.css"
	  style="list of styles"
	  id="id of section"
	  img="url for background image file"
	  alt="text for image description"
	>}}
	  .Inner markdown text to display
	{{< /shortcode-section >}}
	
	Inserts a <section> with a full-bleed image with text on top.
	Both img and text are optional, but then it's a bit pointless.
	
--> */}}

{{/* <!-- get parameters --> */}}
{{- $class := partial "f/gethtmlattrclass.go" . -}}
{{- $style := partial "f/gethtmlattrstyle.go" . -}}
{{- $id := .Get "id" -}}
{{- $img := .Get "img" -}}
{{- $alt := .Get "alt" -}}
{{- $inner := .Inner -}}

{{/* <!-- process id --> */}}
{{- with $id -}}
	{{- $id = printf "id=\"%s\"" $id -}}
{{- end -}}

{{ "<!-- shortcode-section.html:start -->" | safeHTML }}
<section {{ with $id }}{{ . | safeHTMLAttr }}{{ end }} {{ with index $class "main" }}{{ . | safeHTMLAttr }}{{ end }} {{ with index $style "main" }}{{ . | safeHTMLAttr }}{{ end }}>
	{{- if $img -}}
	{{ partial "e/img" $.Params }}
	{{- end -}}
	{{- with $inner -}}
		{{- $inner = $inner | strings.TrimSpace -}}
		{{- if strings.Contains $inner "<!-- shortcode" -}}
			{{/* <!-- if inner contains shortcodes, render inner as html --> */}}
			{{- $dummy := "-->" -}}
			{{ . | safeHTML }}
		{{- else -}}
			{{/* <!-- else render inner as markdown --> */}}
			<div {{ with index $class "text" }}{{ . | safeHTMLAttr }}{{ end }} {{ with index $style "text" }}{{ . | safeHTMLAttr }}{{ end }}>
				{{ . | markdownify}}
			</div>
		{{- end -}}
	{{- end -}}
</section>
{{ "<!-- shortcode-section.html:end -->" | safeHTML }}
