{{/* <!-- 
	
	e/img.html
	
	Parameters:
	- a page object:
		- It will try to retrieve img in the following order:
			- a thumbnail.jpg file located in the same folder as the page,
			- .Params.img
			- .Params.picture (deprecated, use .Params.img instead)
		- It will get the alt text in the following order:
			- .Params.alt
			- .Params.title
	- a data object, with the required properties (see variables below)
		- .img: the image file
		- .alt: the image alt description
		- .class: a list of specific classes applicable to the img
		- .loading: "eager", etc.
		- .decoding: "async", etc.
		- .sizes: list of sizes
		- .width: width of the picture
		- .height: height of the picture
		- .href: link to go when clicking picture 
	
 --> */}}
{{- $type := partial "f/getdatatype.go" . -}}
{{- $data := partial "f/getdata.go" . -}}
{{- $imgpath := partial "f/getimgpath.go" . -}}
{{- $alt := partial "f/getimgalt.go" . -}}
{{- $href := partial "f/geturl.go" . -}}
{{- $srcsetdata := false -}}
{{- $src := "" -}}
{{- $srcset := "" -}}
{{- $sizes := "" -}}
{{- $class := "" -}}
{{- $loading := "" -}}
{{- $decoding := "" -}}
{{- $height := "" -}}
{{- $width := "" -}}

{{- if $imgpath -}}
	{{- $srcsetdata = partial "f/getimgsrcset.go" $imgpath -}}
	{{- $src = printf "src=\"%s\"" (index $srcsetdata 0) -}}
	{{- if (index $srcsetdata 1) -}}
		{{- $srcset = printf "srcset=\"%s\"" (index $srcsetdata 1) -}}
	{{- end -}}
	{{- if (index $srcsetdata 2) -}}
		{{- $sizes = printf "sizes=\"%s\"" (index $srcsetdata 2) -}}
	{{- end -}}
{{- end -}}

{{- with $data.class -}}
	{{- $class = printf "class=\"%s\"" . -}}
{{- end -}}

{{- with $data.loading -}}
	{{- $loading = printf "loading=\"%s\"" . -}}
{{- end -}}

{{- with $data.decoding -}}
	{{- $decoding = printf "decoding=\"%s\"" . -}}
{{- end -}}

{{- with $data.sizes -}}
	{{- $sizes = printf "sizes=\"%s\"" . -}}
{{- end -}}

{{- with $data.width -}}
	{{- $width = printf "width=\"%s\"" . -}}
{{- end -}}

{{- with $data.height -}}
	{{- $height = printf "height=\"%s\"" . -}}
{{- end -}}

{{ "<!-- partials/e/img.html:start -->" | safeHTML }}

{{- if $imgpath -}}
	{{- if $href -}}
	<a class="cl-core--a-underline-none" href="{{ $href }}">
	{{- end -}}
	<img {{ $src | safeHTMLAttr }} {{ $srcset | safeHTMLAttr }} {{ $sizes | safeHTMLAttr }} {{ $alt | safeHTMLAttr }} {{ $class | safeHTMLAttr }} {{ $loading | safeHTMLAttr }} {{ $decoding | safeHTMLAttr }} {{ $width | safeHTMLAttr }} {{ $height | safeHTMLAttr }}>
	{{- if $href -}}
	</a>
	{{- end -}}
{{- else -}}
	<p class="error">ERROR: IMAGE NOT FOUND</p>
{{- end -}}
{{- if eq "page" $type -}}
	<p class="error">ERROR: CHANGE CALL FROM PAGE TO DATA</p>
{{- end -}}
{{ "<!-- partials/e/img.html:end -->" | safeHTML }}
