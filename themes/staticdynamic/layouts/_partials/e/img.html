{{/* <!-- 
	
	e/img.html
	
	Parameters:
	- a data object, with the required properties (see variables below)
		- .img: the image file (required)
		- .alt: the image alt description (required)
		- .class: a list of specific classes applicable to the img
		- .loading: "eager", etc.
		- .decoding: "async", etc.
		- .sizes: list of sizes
		- .width: width of the picture
		- .height: height of the picture
		- .href: link to go when clicking picture 
	
 --> */}}
 
 {{/* <!-- initialize variables --> */}}
{{- $type := partial "f/getdatatype.go" . -}}
{{- $data := partial "f/getdata.go" . -}}
{{- $imgpath := partial "f/getimgpath.go" . -}}
{{- $alt := partial "f/getimgalt.go" . -}}
{{- $href := partial "f/geturl.go" . -}}
{{- $srcsetdata := false -}}
{{- $src := "" -}}
{{- $srcset := "" -}}
{{- $sizes := "" -}}
{{- $class := "" -}}
{{- $loading := "" -}}
{{- $decoding := "" -}}
{{- $height := "" -}}
{{- $width := "" -}}

{{/* <!-- if an image exists... --> */}}
{{- if $imgpath -}}
	{{/* <!-- ...then get the sourceset for the image --> */}}
	{{- $srcsetdata = partial "f/getimgsrcset.go" $imgpath -}}
	{{/* <!-- element 0 of the returned value is the src attribute --> */}}
	{{- $src = printf "src=\"%s\"" (index $srcsetdata 0) -}}
	{{/* <!-- element 1 of the returned value is the srcset attribute --> */}}
	{{- if (index $srcsetdata 1) -}}
		{{- $srcset = printf "srcset=\"%s\"" (index $srcsetdata 1) -}}
	{{- end -}}
	{{/* <!-- element 2 of the returned value is the sizes attribute --> */}}
	{{- if (index $srcsetdata 2) -}}
		{{- $sizes = printf "sizes=\"%s\"" (index $srcsetdata 2) -}}
	{{- end -}}

	{{- with $data.class -}}
		{{- $class = printf "class=\"%s\"" . -}}
	{{- end -}}
	
	{{- with $data.loading -}}
		{{- $loading = printf "loading=\"%s\"" . -}}
	{{- end -}}
	
	{{- with $data.decoding -}}
		{{- $decoding = printf "decoding=\"%s\"" . -}}
	{{- end -}}
	
	{{- with $data.width -}}
		{{- $width = printf "width=\"%s\"" . -}}
	{{- end -}}
	
	{{- with $data.height -}}
		{{- $height = printf "height=\"%s\"" . -}}
	{{- end -}}
{{- end -}}

{{ "<!-- partials/e/img.html:start -->" | safeHTML }}
{{- if $imgpath -}}
	{{- if $href -}}
	<a class="cl-core--a-underline-none" href="{{ $href }}">
	{{- end -}}
	<img {{ $src | safeHTMLAttr }} {{ $srcset | safeHTMLAttr }} {{ $sizes | safeHTMLAttr }} {{ $alt | safeHTMLAttr }} {{ $class | safeHTMLAttr }} {{ $loading | safeHTMLAttr }} {{ $decoding | safeHTMLAttr }} {{ $width | safeHTMLAttr }} {{ $height | safeHTMLAttr }}>
	{{- if $href -}}
	</a>
	{{- end -}}
{{- else -}}
	<p class="error">ERROR: IMAGE NOT FOUND</p>
{{- end -}}
{{ "<!-- partials/e/img.html:end -->" | safeHTML }}
