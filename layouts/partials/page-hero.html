{{ "<!-- partials:page-hero.html:start -->" | safeHTML }}
<header id="hero">

	{{/* <!-- get hero picture if there is one available --> */}}
	{{- $heropath := partial "f/getheropicturepath" . }}

	{{/* <!-- test if there is at least one slide active --> */}}
	{{- $slidercount := 0 }}
	{{- if isset .Params "slider" }}
		{{- range .Params.slider.list }} {{/* <!-- test if at least one slide active --> */}}
			{{- if (partial "f/isactive" .) }}
				{{- $slidercount = add $slidercount 1 }}
			{{- end }}
		{{- end }}
	{{- end }}
	
	{{/* <!-- if there is at least one slide active use it as hero --> */}}
	{{- if gt $slidercount 0 }}
		{{ partial "page-slider.html" . }}

	{{/* <!-- if call to action exists --> */}}
	{{- else if isset .Params "cta" }}
		{{/* <!-- if pic exists, create hero area --> */}}
		<div class="layout-hero">
			<div class="layout-absolute layout-hero">
				<img src="{{ .Params.cta.Picture }}">
			</div>
			{{/* <!-- adding layout-hero div corrects bug on browsers where sticky doesn't work --> */}}
			<div class= "layout-absolute layout-hero" {{ with .Params.cta.opacity }}style="background-color:rgba(0,0,0,.{{ . }});"{{ end }}>	
				<div class="flex-parent-column flex-justify-center flex-align-center">
					{{ if eq "h2" .Params.cta.level }}
						<h2 class="style-slider-title">{{ "<!-- picture and h1 -->" | safeHTML }}
				 	{{ else }}
				 		<h1 class="style-slider-title">{{ "<!-- picture and h2 -->" | safeHTML }}
					{{ end }}
			    {{- with .Params.cta.title }}
						{{ . | markdownify  }}
					{{ end -}}
					{{ if eq true $.Page.Params.Heroh2 }}
						</h2>
				 	{{ else }}
				 		</h1>
					{{ end }}
					{{- with .Params.cta.description }}
						<p class="style-slider-subtitle">{{ . }}</p>
					{{- end }}
					{{- with .Params.cta.button }}
						<a href="{{ .link }}" class="button-primary">{{ .text }}</a>
					{{- end }}
				</div>
			</div>
		</div>
	{{/* <!-- if enablehero is true --> */}}
	{{- else if eq true .Params.enablehero }}
		<div class="layout-hero">
			<img src="{{ $heropath }}" {{ with .Title }}alt="{{ . }}"{{ end }}>
			<div class="layout-hero layout-absolute">
			  <div class="layout-page-title style-page-title-overlay">
					{{ if eq true $.Page.Params.Heroh2 }}
						<h2>{{ "<!-- picture and h1 -->" | safeHTML }}
				 	{{ else }}
				 		<h1>{{ "<!-- picture and h2 -->" | safeHTML }}
					{{ end }}
			    {{- with .Title }}{{ . | markdownify  }}{{ end -}}
					{{ if eq true $.Page.Params.Heroh2 }}
						</h2>
				 	{{ else }}
				 		</h1>
					{{ end }}
			  </div>
			</div>
		</div>
		
	{{- else if .Title -}}
		{{/* <!-- else if title exists, create title area --> */}}
		{{- if and (eq .Section "news") (.IsPage) }}
			{{/* <!-- no title for news pages (ideally should be replaced by a parameter) --> */}}
		{{ else if and (eq .Section "team") (.IsPage) }}
			{{/* <!-- no title for team member  pages (ideally should be replaced by a parameter) --> */}}
		{{- else }}
			<div class="layout-page-title style-page-title">
				<h1>
	        {{ with .Title }}{{ . | markdownify  }}{{ end }}
		 		</h1>
	    </div>
		{{- end }}
		
	{{- end }}
</header>
{{ "<!-- partials:page-hero.html:end -->" | safeHTML }}
